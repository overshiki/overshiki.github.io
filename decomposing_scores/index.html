<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="/libs/katex/katex.min.css">
     
  
    <link rel="stylesheet" href="/css/jtd.css">
  <link rel="icon" href="/assets/favicon.ico">

   <title>decomposing scores</title>  
</head>
<body>                      <!-- closed in foot.html -->
<div class="page-wrap">   <!-- closed in foot.html -->
  <!-- SIDE BAR -->
  <div class="side-bar">
    <div class="header">
      <a href="/" class="title">
        Le Niu's forge
      </a>
    </div>
    <label for="show-menu" class="show-menu">MENU</label>
    <input type="checkbox" id="show-menu" role="button">
    <div class="menu" id="side-menu">
      <ul class="menu-list">
        <li class="menu-list-item "><a href="/" class="menu-list-link ">Home</a>
        <!-- <li><a href="/Decomposing_ELBO/">Decomposing ELBO</a></li>
        <li><a href="/VITE/">VITE</a></li> -->
        <!-- <li class="menu-list-item {{ispage menu1/*}}active{{end}}"><a href="/menu1/" class="menu-list-link {{ispage menu1}}active{{end}}">Code blocks</a>
        <li class="menu-list-item {{ispage menu2/*}}active{{end}}"><a href="/menu2/" class="menu-list-link {{ispage menu2}}active{{end}}">More goodies</a>
        <li class="menu-list-item {{ispage menu3/*}}active{{end}}"><a href="/menu3/" class="menu-list-link {{ispage menu3}}active{{end}}">Tags</a>
          <ul class="menu-list-child-list ">
            <li class="menu-list-item "><a href="#" class="menu-list-link">Submenu</a>
          </ul> -->
      </ul>
    </div>
    <div class="footer">
      This is <em>Just the docs</em>, adapted from the <a href="https://github.com/pmarsceill/just-the-docs" target="_blank">Jekyll theme</a>.
    </div>
  </div>
  <!-- CONTENT -->
  <div class="main-content-wrap"> <!-- closed in foot.html -->
    <div class="main-content">    <!-- closed in foot.html -->

      <!-- <div class="main-header">
        <a id="github" href="//github.com/overshiki">Le Niu on GitHub</a>
      </div> -->



<!-- Content appended here (in class franklin-content) -->
<div class="franklin-content"><h2 id="decomposing_scores"><a href="#decomposing_scores" class="header-anchor">decomposing scores</a></h2>
<p>In Bayesian inference, the score is defined as the gradient of the log evidence \(P(x)\) respect to the observable random variable \(x\):</p>
\(\nabla_x log P(x)\)
<p>The key is that the observable RV \(x\) is also connected with hidden variable \(h\) such that the evidence could be decomposed:</p>
\(P(x) = \int P(x|y) P(y) dy\)
<p>Using Bayesian rule, we could easily reach the posterior of hidden variable \(y\):</p>
\(P(y|x) = \frac{P(x|y)P(y)}{P(x)} = \frac{P(x|y)P(y)}{\int P(x|y) P(y) dy}\)
<p>The trick is that, score could be rewritten given the posterior:</p>
\(\nabla_x log P(x) = \int_y \nabla_x log P(x|y) P(y|x) dy = \mathbb{E}_{y\sim P(y|x)} \nabla_x log P(x|y)\)
<p>This trick is used in score matching and diffusion models, as mentioned in <a href="https://arxiv.org/abs/2202.02763">A</a></p>
<p>for example:</p>
<p>the minimizer of below function will result in score matching method:</p>
\(l_t(\bold{s}) = \mathbb{E}[|| \bold{s}(\bold{X_t}) - \nabla_{x_t} log P_{t|0}(\bold{X_t}| \bold{X_0}) ||^2]\)
<p>where the expectation is taken in respected to the posterior \(P_{0|t}(\bold{X_0}|\bold{X_t})\)</p>
<p><br/> <br/> <br/> <br/> <br/></p>
<div class="page-foot">
    <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> Le Niu. Last modified: May 22, 2023.
    Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
</div>
</div><!-- CONTENT ENDS HERE -->
    </div> <!-- end of class main-content -->
    </div> <!-- end of class main-content-wrap -->
    </div> <!-- end of class page-wrap-->
    
      <script src="/libs/katex/katex.min.js"></script>
<script src="/libs/katex/auto-render.min.js"></script>
<script>renderMathInElement(document.body)</script>

    
    
  </body>
</html>
